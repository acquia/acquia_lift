services:
  acquia_perz.entity_settings:
    class: Drupal\Core\Config\ImmutableConfig
    factory: config.factory:get
    arguments:
      - 'acquia_perz.entity_config'

  acquia_perz.cis_settings:
    class: Drupal\Core\Config\ImmutableConfig
    factory: config.factory:get
    arguments:
      - 'acquia_perz.settings'

  acquia_perz.export_content:
    class: Drupal\acquia_perz\ExportContent
    arguments:
      - '@http_client'
      - '@acquia_perz.export_queue'
      - '@acquia_perz.tracker'
      - '@acquia_perz.entity_settings'
      - '@acquia_perz.cis_settings'
      - '@entity_type.manager'
      - '@entity_field.manager'
      - '@renderer'
      - '@uuid'
      - '@date.formatter'
      - '@datetime.time'

  acquia_perz.export_queue:
    class: Drupal\acquia_perz\ExportQueue
    arguments: [
      '@acquia_perz.tracker',
      '@acquia_perz.entity_settings',
      '@renderer',
      '@entity_type.manager',
      '@queue',
      '@plugin.manager.queue_worker',
      '@messenger'
    ]

  acquia_perz.tracker:
    class: Drupal\acquia_perz\ExportTracker
    arguments: [
      '@database',
      '@entity_type.manager'
    ]
