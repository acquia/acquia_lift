services:
  acquia_perz1.entity_settings:
    class: Drupal\Core\Config\ImmutableConfig
    factory: config.factory:get
    arguments:
      - 'acquia_perz1.entity_config'

  acquia_perz1.cis_settings:
    class: Drupal\Core\Config\ImmutableConfig
    factory: config.factory:get
    arguments:
      - 'acquia_perz1.settings'

  acquia_perz1.export_content:
    class: Drupal\acquia_perz1\ExportContent
    arguments:
      - '@http_client'
      - '@acquia_perz1.export_queue'
      - '@acquia_perz1.tracker'
      - '@acquia_perz1.entity_settings'
      - '@acquia_perz1.cis_settings'
      - '@entity_type.manager'
      - '@entity_field.manager'
      - '@renderer'
      - '@uuid'
      - '@date.formatter'
      - '@datetime.time'

  acquia_perz1.export_queue:
    class: Drupal\acquia_perz1\ExportQueue
    arguments: [
      '@acquia_perz1.tracker',
      '@acquia_perz1.entity_settings',
      '@acquia_perz1.cis_settings',
      '@renderer',
      '@entity_type.manager',
      '@queue',
      '@plugin.manager.queue_worker',
      '@messenger'
    ]

  acquia_perz1.tracker:
    class: Drupal\acquia_perz1\ExportTracker
    arguments: [
      '@database',
      '@entity_type.manager'
    ]
